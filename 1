local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer

-- ===== НАСТРОЙКИ =====
local Settings = {
    Key = Enum.KeyCode.H,           -- Кнопка активации
    Dupe = true,                   -- Дублировать предметы, если уже есть
    SearchFolders = {              -- Где ищем предметы
        game.ServerStorage,
        game.ReplicatedStorage,
        game.Lighting,
        workspace:FindFirstChild("Weapons"),
        workspace:FindFirstChild("Tools"),
        workspace:FindFirstChild("Items"),
        game:GetService("ReplicatedStorage"):FindFirstChild("Tools"),
        game:GetService("ReplicatedStorage"):FindFirstChild("Weapons"),
        game:GetService("ServerStorage"):FindFirstChild("Tools"),
        game:GetService("ServerStorage"):FindFirstChild("Weapons"),
    }
}

-- ===== ФУНКЦИЯ: ВЫДАТЬ ВСЁ =====
local function GiveAllTools()
    local character = LocalPlayer.Character
    if not character then return end
    local backpack = LocalPlayer:FindFirstChild("Backpack")
    if not backpack then return end
    
    local given = 0
    
    -- Проходим по всем папкам из списка
    for _, folder in ipairs(Settings.SearchFolders) do
        if folder and folder:IsA("Instance") then
            -- Ищем ВСЕ объекты типа Tool
            for _, tool in pairs(folder:GetDescendants()) do
                if tool:IsA("Tool") then
                    -- Проверяем, есть ли уже такой предмет
                    local alreadyHas = false
                    if not Settings.Dupe then
                        for _, item in pairs(backpack:GetChildren()) do
                            if item.Name == tool.Name then
                                alreadyHas = true
                                break
                            end
                        end
                    end
                    
                    -- Выдаём, если нет дубликата или разрешён дуп
                    if not alreadyHas or Settings.Dupe then
                        local clone = tool:Clone()
                        clone.Parent = backpack
                        given = given + 1
                    end
                end
            end
        end
    end
    
    -- Если ничего не нашли — пробуем альтернативный метод
    if given == 0 then
        print("⚠️ Не найдено предметов в стандартных папках. Пробую ручной режим...")
        GiveManualTools()
    else
        print("✅ Выдано предметов: " .. given)
    end
end

-- ===== РУЧНОЙ РЕЖИМ (ДОПИШИ СВОИ ПРЕДМЕТЫ) =====
local function GiveManualTools()
    local backpack = LocalPlayer:FindFirstChild("Backpack")
    if not backpack then return end
    
    -- ⚠️⚠️⚠️ ВПИШИ СЮДА НАЗВАНИЯ ПРЕДМЕТОВ, КОТОРЫЕ НУЖНЫ ⚠️⚠️⚠️
    local toolNames = {
        -- Примеры (удали и напиши свои):
        -- "Sword", "Gun", "AK47", "M4A1", "Medkit", "GrapplingHook", "Key"
    }
    
    -- Где искать предметы (по умолчанию ServerStorage)
    local source = game.ServerStorage
    
    for _, name in ipairs(toolNames) do
        local tool = source:FindFirstChild(name, true)  -- true = искать везде внутри
        if tool and tool:IsA("Tool") then
            local clone = tool:Clone()
            clone.Parent = backpack
            print("✅ Выдано: " .. name)
        else
            print("❌ Не найден: " .. name)
        end
    end
end

-- ===== УПРАВЛЕНИЕ КНОПКОЙ H =====
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if not gameProcessed and input.KeyCode == Settings.Key then
        GiveAllTools()
    end
end)

print("✅ СКРИПТ ВЫДАЧИ ПРЕДМЕТОВ ЗАГРУЖЕН. НАЖМИ H, ЧТОБЫ ПОЛУЧИТЬ ВСЁ.")
print("⚠️ Если ничего не выдало — открой код и допиши названия предметов в GiveManualTools()")
