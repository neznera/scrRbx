--[[
    ПОДРОБНЫЙ АНАЛИЗ ОБЪЕКТА ПОД КУРСОРОМ
    - Наведись на объект (подсветка) и нажми ЛКМ.
    - В консоли (F9) появится полная информация.
]]

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer
local Mouse = LocalPlayer:GetMouse()

local currentHighlight = nil
local lastTarget = nil

local function highlightObject(obj)
    if currentHighlight then
        currentHighlight:Destroy()
        currentHighlight = nil
    end
    if obj then
        local highlight = Instance.new("Highlight")
        highlight.Adornee = obj
        highlight.FillColor = Color3.fromRGB(255, 255, 255)
        highlight.FillTransparency = 0.5
        highlight.OutlineColor = Color3.fromRGB(255, 255, 255)
        highlight.OutlineTransparency = 0
        highlight.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
        highlight.Parent = game:GetService("CoreGui")
        currentHighlight = highlight
    end
end

RunService.RenderStepped:Connect(function()
    local target = Mouse.Target
    if target ~= lastTarget then
        lastTarget = target
        highlightObject(target)
    end
end)

UserInputService.InputBegan:Connect(function(input, gp)
    if gp then return end
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        local target = lastTarget
        if target then
            local char = LocalPlayer.Character
            local root = char and (char:FindFirstChild("HumanoidRootPart") or char:FindFirstChild("Torso"))
            local dist = root and (target:IsA("BasePart") and (target.Position - root.Position).Magnitude or "N/A") or "N/A"
            print("========== ПОДРОБНАЯ ИНФОРМАЦИЯ ==========")
            print("Имя:", target.Name)
            print("Класс:", target.ClassName)
            print("Полный путь:", target:GetFullName())
            print("Расстояние:", type(dist) == "number" and string.format("%.1f stud", dist) or dist)
            if target:IsA("BasePart") then
                print("Позиция:", tostring(target.Position))
                print("Прозрачность (Transparency):", target.Transparency)
                print("Может сталкиваться (CanCollide):", target.CanCollide)
                print("Закреплён (Anchored):", target.Anchored)
                print("Материал (Material):", target.Material.Name)
                print("Размер (Size):", tostring(target.Size))
                print("Цвет (Color):", tostring(target.Color))
                print("Отражение (Reflectance):", target.Reflectance)
                -- Вывод атрибутов, если есть
                local attrs = target:GetAttributes()
                for k, v in pairs(attrs) do
                    print("Атрибут:", k, "=", tostring(v))
                end
            end
            print("Родитель:", target.Parent and target.Parent.Name or "nil")
            print("============================================")
        else
            print("Под курсором нет объекта.")
        end
    end
end)

print("✅ Анализатор загружен. Наводись на объект и кликай ЛКМ.")
