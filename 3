--[[
    РАСШИРЕННЫЙ ПОИСК ОБЪЕКТОВ РЯДОМ
    - Нажми T, чтобы увидеть ВСЕ объекты (не только части) в радиусе 20 студий.
]]

local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer

local SEARCH_RADIUS = 20
local KEY = Enum.KeyCode.T

local function FindNearbyObjects()
    local character = LocalPlayer.Character
    if not character then
        print("❌ Персонаж не найден")
        return
    end

    local rootPart = character:FindFirstChild("HumanoidRootPart") or character:FindFirstChild("Torso")
    if not rootPart then
        print("❌ Корневая часть не найдена")
        return
    end

    local center = rootPart.Position
    local found = {}

    -- Перебираем ВСЕ объекты в workspace (игнорируя персонажа)
    for _, obj in pairs(workspace:GetDescendants()) do
        -- Проверяем, есть ли у объекта позиция (BasePart, Model и т.д.)
        local pos = (obj:IsA("BasePart") and obj.Position) or (obj:IsA("Model") and obj:GetPrimaryPartCFrame() and obj:GetPrimaryPartCFrame().Position)
        if pos then
            local dist = (pos - center).Magnitude
            if dist <= SEARCH_RADIUS then
                table.insert(found, {
                    Name = obj.Name,
                    Class = obj.ClassName,
                    Path = obj:GetFullName(),
                    Distance = dist,
                    Position = pos
                })
            end
        end
    end

    print("\n=== ОБЪЕКТЫ РЯДОМ (радиус " .. SEARCH_RADIUS .. " stud) ===")
    if #found == 0 then
        print("Ничего не найдено")
    else
        table.sort(found, function(a, b) return a.Distance < b.Distance end)
        for i, item in ipairs(found) do
            print(string.format("%d. %s (%s) — %.1f stud", i, item.Name, item.Class, item.Distance))
            print("   Путь: " .. item.Path)
        end
    end
    print("=====================================\n")
end

UserInputService.InputBegan:Connect(function(input, gp)
    if gp then return end
    if input.KeyCode == KEY then
        FindNearbyObjects()
    end
end)

print("✅ Расширенный сканер загружен. Нажми T для поиска.")
