--[[
    –¢–ï–õ–ï–ü–û–†–¢ –¢–û–õ–¨–ö–û –ù–ê –°–ù–ï–ñ–ò–ù–ö–ò (–ì–û–õ–£–ë–´–ï) –° –ß–Å–†–ù–´–ú –°–ü–ò–°–ö–û–ú –§–ê–ù–¢–û–ú–û–í
    - –ò–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –æ–±—ä–µ–∫—Ç—ã —Å –¥–æ—á–µ—Ä–Ω–∏–º Sound (–º–µ–¥–æ–≤—ã–µ —Ç–æ–∫–µ–Ω—ã –∏ —Ñ–∞–Ω—Ç–æ–º—ã)
    - –°—Ç—Ä–æ–≥–∞—è —Ü–≤–µ—Ç–æ–≤–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–ª—è —Å–Ω–µ–∂–∏–Ω–æ–∫
    - –ß—ë—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –¥–ª—è —Ñ–∞–Ω—Ç–æ–º–Ω—ã—Ö —Å–Ω–µ–∂–∏–Ω–æ–∫
    - –ö–ª–∞–≤–∏—à–∏:
        T ‚Äî –ø–∞—É–∑–∞/–≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
        R ‚Äî –æ—á–∏—Å—Ç–∏—Ç—å —á—ë—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫
]]

local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer

local TARGET_NAME = "C"
-- –¢–æ—á–Ω—ã–π —Ü–≤–µ—Ç —Å–Ω–µ–∂–∏–Ω–∫–∏ (–∏–∑ –≤–∞—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö)
local SNOWFLAKE_COLOR = Color3.new(0.431373, 0.956863, 0.941176)
local COLOR_TOLERANCE = 0.03   -- –¥–æ–ø—É—Å–∫ –ø–æ –∫–∞–∂–¥–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ —Ü–≤–µ—Ç–∞
local BLACKLIST = {}           -- –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Ñ–∞–Ω—Ç–æ–º–Ω—ã—Ö —Å–Ω–µ–∂–∏–Ω–æ–∫
local ENABLED = true

-- –§—É–Ω–∫—Ü–∏—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Ü–≤–µ—Ç–æ–≤
local function colorClose(c1, c2)
    return math.abs(c1.R - c2.R) < COLOR_TOLERANCE
        and math.abs(c1.G - c2.G) < COLOR_TOLERANCE
        and math.abs(c1.B - c2.B) < COLOR_TOLERANCE
end

-- –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –æ–±—ä–µ–∫—Ç –Ω–∞—Å—Ç–æ—è—â–µ–π —Å–Ω–µ–∂–∏–Ω–∫–æ–π
local function isRealSnowflake(obj)
    if not obj:IsA("BasePart") then return false end
    if obj.Name ~= TARGET_NAME then return false end
    if obj.Transparency ~= 0 then return false end
    -- –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ü–≤–µ—Ç
    if not colorClose(obj.Color, SNOWFLAKE_COLOR) then return false end
    -- –ï—Å–ª–∏ –µ—Å—Ç—å –¥–æ—á–µ—Ä–Ω–∏–π Sound ‚Äî —ç—Ç–æ –º–µ–¥–æ–≤—ã–π —Ç–æ–∫–µ–Ω –∏–ª–∏ —Ñ–∞–Ω—Ç–æ–º
    if obj:FindFirstChild("Sound") then return false end
    return true
end

-- –§—É–Ω–∫—Ü–∏—è –∫–ª—é—á–∞ –ø–æ –ø–æ–∑–∏—Ü–∏–∏
local function posKey(pos)
    return string.format("%.1f_%.1f_%.1f", pos.X, pos.Y, pos.Z)
end

-- –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª
while ENABLED do
    local char = LocalPlayer.Character
    if char then
        local root = char:FindFirstChild("HumanoidRootPart") or char:FindFirstChild("Torso")
        if root then
            local myPos = root.Position
            local closest = nil
            local closestDist = math.huge

            -- –ü–æ–∏—Å–∫ –±–ª–∏–∂–∞–π—à–µ–π –Ω–∞—Å—Ç–æ—è—â–µ–π —Å–Ω–µ–∂–∏–Ω–∫–∏, –Ω–µ –≤ —á—ë—Ä–Ω–æ–º —Å–ø–∏—Å–∫–µ
            for _, obj in pairs(workspace:GetDescendants()) do
                if isRealSnowflake(obj) then
                    local key = posKey(obj.Position)
                    if not BLACKLIST[key] then
                        local dist = (obj.Position - myPos).Magnitude
                        if dist < closestDist then
                            closestDist = dist
                            closest = obj
                        end
                    end
                end
            end

            if closest then
                local pos = closest.Position
                root.CFrame = CFrame.new(pos)
                task.wait(0.1)  -- –∂–¥—ë–º, –¥–æ–ª–∂–µ–Ω –ª–∏ –æ–±—ä–µ–∫—Ç –∏—Å—á–µ–∑–Ω—É—Ç—å

                -- –ï—Å–ª–∏ –æ–±—ä–µ–∫—Ç –≤—Å—ë –µ—â—ë —Å—É—â–µ—Å—Ç–≤—É–µ—Ç ‚Äî —ç—Ç–æ —Ñ–∞–Ω—Ç–æ–º–Ω–∞—è —Å–Ω–µ–∂–∏–Ω–∫–∞
                if closest and closest.Parent then
                    BLACKLIST[posKey(pos)] = true
                    print("üö´ –§–∞–Ω—Ç–æ–º–Ω–∞—è —Å–Ω–µ–∂–∏–Ω–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ —á—ë—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫")
                end
            end
        end
    end
    task.wait(0.05)
end

-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
UserInputService.InputBegan:Connect(function(input, gp)
    if gp then return end
    if input.KeyCode == Enum.KeyCode.T then
        ENABLED = not ENABLED
        print(ENABLED and "‚ñ∂Ô∏è –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—â–µ–Ω" or "‚è∏Ô∏è –°–∫—Ä–∏–ø—Ç –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω")
    elseif input.KeyCode == Enum.KeyCode.R then
        BLACKLIST = {}
        print("üßπ –ß—ë—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫ –æ—á–∏—â–µ–Ω")
    end
end)

print("‚úÖ –°–∫—Ä–∏–ø—Ç –¥–ª—è —Å–Ω–µ–∂–∏–Ω–æ–∫ –∑–∞–≥—Ä—É–∂–µ–Ω. T ‚Äî –ø–∞—É–∑–∞, R ‚Äî –æ—á–∏—Å—Ç–∏—Ç—å —á—ë—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫.")
