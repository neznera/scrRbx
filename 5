--[[
    АВТОМАТИЧЕСКАЯ ТЕЛЕПОРТАЦИЯ НА АКТИВНЫЕ ТОКЕНЫ "C"
    - Игнорирует объекты, у которых есть дочерний объект "Sound".
    - Телепортируется на ближайший активный токен.
]]

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

local TARGET_NAME = "C"

-- Функция проверки, активен ли токен (нет звука)
local function isActive(obj)
    if obj:IsA("BasePart") and obj.Name == TARGET_NAME and obj.Transparency == 0 then
        -- Если есть дочерний объект "Sound" – это фантом
        if obj:FindFirstChild("Sound") then
            return false
        end
        return true
    end
    return false
end

-- Основной цикл
while true do
    local char = LocalPlayer.Character
    if char then
        local root = char:FindFirstChild("HumanoidRootPart") or char:FindFirstChild("Torso")
        if root then
            local myPos = root.Position
            local closest = nil
            local closestDist = math.huge

            for _, obj in pairs(workspace:GetDescendants()) do
                if isActive(obj) then
                    local dist = (obj.Position - myPos).Magnitude
                    if dist < closestDist then
                        closestDist = dist
                        closest = obj
                    end
                end
            end

            if closest then
                root.CFrame = CFrame.new(closest.Position)
            end
        end
    end
    task.wait(0.03)
end
