--[[
    –ü–õ–ê–í–ù–û–ï –ü–ï–†–ï–ú–ï–©–ï–ù–ò–ï –ö –¢–û–ö–ï–ù–£ (SnowflakeToken)
    - –ù–∞–∂–º–∏ T, —á—Ç–æ–±—ã –±—ã—Å—Ç—Ä–æ –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å—Å—è –∫ –±–ª–∏–∂–∞–π—à–µ–º—É —Ç–æ–∫–µ–Ω—É.
    - –î–≤–∏–∂–µ–Ω–∏–µ –ø–ª–∞–≤–Ω–æ–µ (–∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è), –∞ –Ω–µ –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–π —Ç–µ–ª–µ–ø–æ—Ä—Ç.
]]

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer

-- –ù–ê–°–¢–†–û–ô–ö–ò
local TELEPORT_KEY = Enum.KeyCode.T
local SEARCH_RADIUS = 1000           -- —Ä–∞–¥–∏—É—Å –ø–æ–∏—Å–∫–∞ —Ü–µ–ª–∏
local TARGET_NAME = "SnowflakeToken" -- —Ç–æ—á–Ω–æ–µ –∏–º—è —Ç–æ–∫–µ–Ω–∞ (–º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å)
local MOVE_SPEED = 200               -- —Å–∫–æ—Ä–æ—Å—Ç—å –¥–≤–∏–∂–µ–Ω–∏—è (—Å—Ç—É–¥–∏–π/—Å–µ–∫)

local isMoving = false
local targetPosition = nil
local moveConnection = nil

-- –§—É–Ω–∫—Ü–∏—è –ø–æ–∏—Å–∫–∞ –±–ª–∏–∂–∞–π—à–µ–≥–æ —Ç–æ–∫–µ–Ω–∞
local function FindClosestToken()
    local char = LocalPlayer.Character
    if not char then return nil end
    local root = char:FindFirstChild("HumanoidRootPart") or char:FindFirstChild("Torso")
    if not root then return nil end

    local closest = nil
    local closestDist = SEARCH_RADIUS
    for _, obj in pairs(workspace:GetDescendants()) do
        if obj.Name == TARGET_NAME and obj:IsA("BasePart") then
            local dist = (obj.Position - root.Position).Magnitude
            if dist < closestDist then
                closestDist = dist
                closest = obj
            end
        end
    end
    return closest
end

-- –§—É–Ω–∫—Ü–∏—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –¥–≤–∏–∂–µ–Ω–∏—è
local function StopMoving()
    if moveConnection then
        moveConnection:Disconnect()
        moveConnection = nil
    end
    isMoving = false
    targetPosition = nil
end

-- –§—É–Ω–∫—Ü–∏—è –Ω–∞—á–∞–ª–∞ –ø–ª–∞–≤–Ω–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è –∫ —Ü–µ–ª–∏
local function StartMoving(target)
    if not target or not target:IsA("BasePart") then return end

    -- –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–µ–µ –¥–≤–∏–∂–µ–Ω–∏–µ, –µ—Å–ª–∏ –±—ã–ª–æ
    StopMoving()

    targetPosition = target.Position
    local char = LocalPlayer.Character
    if not char then return end
    local root = char:FindFirstChild("HumanoidRootPart") or char:FindFirstChild("Torso")
    if not root then return end

    isMoving = true

    moveConnection = RunService.Heartbeat:Connect(function(dt)
        if not isMoving or not root or not targetPosition then
            StopMoving()
            return
        end

        local currentPos = root.Position
        local direction = targetPosition - currentPos
        local distance = direction.Magnitude

        if distance < 1 then
            -- –î–æ—Å—Ç–∏–≥–ª–∏ —Ü–µ–ª–∏
            root.CFrame = CFrame.new(targetPosition)  -- —Ñ–∏–Ω–∞–ª—å–Ω–∞—è —Ç–æ—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞
            print("‚úÖ –î–æ—Å—Ç–∏–≥–Ω—É—Ç —Ç–æ–∫–µ–Ω")
            StopMoving()
            return
        end

        -- –î–≤–∏–≥–∞–µ–º—Å—è –ø–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—é
        local step = direction.Unit * MOVE_SPEED * dt
        if step.Magnitude > distance then
            root.CFrame = CFrame.new(targetPosition)
        else
            root.CFrame = CFrame.new(currentPos + step)
        end
    end)
end

-- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞–∂–∞—Ç–∏—è –∫–ª–∞–≤–∏—à–∏
UserInputService.InputBegan:Connect(function(input, gp)
    if gp then return end
    if input.KeyCode == TELEPORT_KEY then
        local target = FindClosestToken()
        if target then
            print("üîç –ù–∞–π–¥–µ–Ω —Ç–æ–∫–µ–Ω, –Ω–∞—á–∏–Ω–∞—é –¥–≤–∏–∂–µ–Ω–∏–µ...")
            StartMoving(target)
        else
            print("‚ùå –¢–æ–∫–µ–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ —Ä–∞–¥–∏—É—Å–µ", SEARCH_RADIUS)
        end
    end
end)

-- –°–±—Ä–æ—Å –¥–≤–∏–∂–µ–Ω–∏—è –ø—Ä–∏ —Ä–µ—Å–ø–∞–≤–Ω–µ
LocalPlayer.CharacterAdded:Connect(function()
    StopMoving()
end)

print("‚úÖ –°–∫—Ä–∏–ø—Ç –ø–ª–∞–≤–Ω23232323–æ–≥–æ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω. –ù–∞–∂–º–∏ T –¥–ª—è –¥–≤–∏–∂–µ–Ω–∏—è –∫ —Ç–æ–∫–µ–Ω—É.")
